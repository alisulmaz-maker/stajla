<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title id="page-title">Makale Detayı - STAJLA</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/png" href="/img/logo.png">
</head>
<body>
<header class="navbar">
    <div class="left">
        <div id="hamburger-menu"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        <a href="/index.html" class="logo-link"><img src="/img/logo.png" alt="STAJLA" class="logo-img"><span class="logo-text">STAJLA</span></a>
    </div>
    <nav class="nav-links">
        <a href="/index.html" class="desktop-link">Anasayfa</a>
        <a href="/isveren-ilan.html" class="desktop-link">İşveren İlan</a>
        <a href="/ogrenci-ilan.html" class="desktop-link">Öğrenci İlan</a>
        <a href="/blog.html" class="desktop-link" style="font-weight: bold;">Kariyer Rehberi</a>
        <a href="/iletisim.html" class="desktop-link">İletişim</a>
        <div id="user-nav"><a href="/giris.html">Giriş / Kayıt</a></div>
    </nav>
</header>
<div id="mobile-nav">
    <a href="/index.html">Anasayfa</a>
    <a href="/isveren-ilan.html">İşveren İlan</a>
    <a href="/ogrenci-ilan.html">Öğrenci İlan</a>
    <a href="/blog.html">Kariyer Rehberi</a>
    <a href="/iletisim.html">İletişim</a>
</div>

<main class="form-page" style="max-width: 800px; text-align: left;">
    <p><a href="/blog.html" style="font-size: 0.9rem;">&larr; Kariyer Rehberine Geri Dön</a></p>

    <div id="makale-icerigi" class="card" style="padding: 40px;">
        <h1 id="makale-baslik" class="section-title" style="margin-bottom: 20px;">Yükleniyor...</h1>
        <div id="makale-metni">
            <p>Lütfen bekleyiniz, makale içeriği hazırlanıyor.</p>
        </div>
    </div>
</main>

<footer>
    <p>
        © 2025 STAJLA |
        <a href="/gizlilik.html">Gizlilik Politikası</a> |
        <a href="/kullanim-sartlari.html">Kullanım Şartları</a> |
        <a href="mailto:stajladestek@gmail.com">İletişim</a>
    </p>
</footer>

<script src="/js/main.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const makaleMetniDiv = document.getElementById('makale-metni');
        const makaleBaslikH1 = document.getElementById('makale-baslik');
        const pageTitle = document.getElementById('page-title');

        try {
            // 1. URL'den makalenin 'slug'ını al (örn: ?id=cv_hazirlama)
            const params = new URLSearchParams(window.location.search);
            const slug = params.get('id');

            if (!slug) {
                throw new Error('Makale ID\'si bulunamadı.');
            }

            // 2. Sunucudan o makalenin detayını çek (server.js'e eklediğimiz rota)
            const response = await fetch(`/api/article/${slug}`);
            const result = await response.json();

            if (!result.success) {
                throw new Error(result.message);
            }

            const article = result.article;

            // 3. İçeriği sayfaya yerleştir
            makaleBaslikH1.textContent = article.title;
            pageTitle.textContent = article.title + ' - STAJLA';
            makaleMetniDiv.innerHTML = article.content; // 'content' alanı HTML olarak geliyor

        } catch (err) {
            console.error('Makale yüklenirken hata:', err);
            makaleBaslikH1.textContent = 'Makale Bulunamadı';
            makaleMetniDiv.innerHTML = `<p>Aradığınız makale bulunamadı veya bir hata oluştu: ${err.message}</p>`;
        }
    });
</script>